---
layout: default
title: Frontend Guidelines
subnav:
  - Best Practices
  - Email Clients
---

<h2 id="best-practices">Best Practices</h2>

<p class="m-t-2-xs">
  <span class="bold">Write good code</span>: Review these Frontend Guidelines to get a sense of the best practices and get a feel for how the code is structured. Play close attention to the Cross-Email Client Guidelines which will help you develop the most bullet-proof email as possible.
</p>

<p class="m-t-2-xs">
  <span class="bold">Don't write inline CSS</span>: During development, don't torture yourself by using inlined CSS. Be sure you process it in an inliner right before you test the email though, as some email clients only accept inlined CSS.
</p>

<p class="m-t-2-xs">
  <span class="bold">Use well supported CSS</span>: Wherever possible, use CSS that's well supported across email clients, particularly the ones that are in our <a href="{{ site.baseurl }}/atmosphere/email_client_support.html">Email Client Support chart</a>. Campaign Monitor has a great <a href="http://campaignmonitor.com/css/" target="_blank">chart</a> that displays the CSS support across email clients.
</p>

<p class="m-t-2-xs">
  <span class="bold">Make it accessible</span>: Be mindful of providing the <a href="{{ site.baseurl }}/atmosphere/accessibility.html">Accessibility</a> affordances.
</p>

<p class="m-t-2-xs">
  <span class="bold">Review the Cross-Email Client Guidelines</span>: We have Cross-Email Client Guidelines that set you up for success. Refer to the <a href="{{ site.baseurl }}/atmosphere/email_client_support.html">Email Client Support chart</a> to identify the top clients we support.
</p>

<p class="m-t-2-xs">
  <span class="bold">Upload images wisely</span>: Ideally, upload images to the ESP that's housing the email. Alternatively, if you're using Mandrill or otherwise need a space to store images, you can upload them to S3. Ask Engineering for access or assistence. Use https for images to avoid any mixed content warnings.
</p>

<p class="m-t-2-xs">
  <span class="bold">Validate HTML</span>: Use the process described below to validate the HTML. When working with often complicated email code full of nested tables, it's easy to forget a closing tag which can really mess up your layout in some email clients. Pass it through this tool to check for errors.
</p>

<p class="m-t-2-xs">
  <span class="bold">Compress the code</span>: Use the process described below to compress the HTML and CSS. In an effort to get email size as small as possible, compress the HTML. Smaller emails mean they load faster and avoid being clipped by email clients when they surpass file size maximums (Gmail's max is 102KB). Luckily, image sizes aren't included in this- only the text, full URLs, and HTML is counted.
</p>

<p class="m-t-2-xs">
  <span class="bold">Test it</span>: Use the process described below to check for broken links and other errors. Also, test it across email clients. Developing emails that render well across email clients is a tricky beast. Luckily, our templates have been thoroughly tested to ensure you're being set up for success. That being said, as emails are being tweaked there's always the chance that it could look amiss in a given browser on a certain OS. The goal with testing is to catch these before emails are sent out so that we can confidently send high quality, high performing, on-brand emails. Email on Acid is a handy tool for testing emails across email clients. Use the profile named "Treehouse Email Client Matrix" to test the email against the email clients defined in our <a href="{{ site.baseurl }}/atmosphere/email_client_support.html">Email Client Support chart</a>.
</p>

<h2 class="p-t-3-xs">Using the Template Builder</h2>
<h3 class="p-t-2-xs">Setup</h3>
<ul>
  <li class="p-t-1-xs">Clone this repo: <a href="https://github.com/treehouse/email-style-guide/" target="_blank">https://github.com/treehouse/email-style-guide/</a></li>
  <li class="p-t-1-xs">Start Jekyll
    <ul>
      <li class="p-t-1-xs"><code>$ bin/setup</code></li>
      <li class="p-t-1-xs"><code>$ yarn serve</code></li>
    </ul>
  </li>
  <li class="p-t-1-xs">View it locally
    <ul>
      <li class="p-t-1-xs">Open in your browser: <a href="http://localhost:4000/email-style-guide/" target="_blank">http://localhost:4000/email-style-guide/</a></li>
    </ul>
  </li>
</ul>

<h3 class="p-t-3-xs">Directory Structure</h3>

<ul>
  <li>email-style-guide/
    <ul>
      <li class="p-t-1-xs"><span class="bold">src/</span>: This is where all source code is stored. Add new templates and styles here.
        <ul>
          <li class="p-t-1-xs"><span class="bold">sass/</span>: This is where the Sass files for the email style guide classes are kept.</li>
          <li class="p-t-1-xs"><span class="bold">templates/</span>: This is where the source code for the templates are kept.</li>
        </ul>
      </li>
      <li class="p-t-1-xs"><span class="bold">dist/</span>: This is where all code is built. "dist" is short for distribution. Running yarn build will generate CSS and HTML templates in this directory.
        <ul>
          <li class="p-t-1-xs"><span class="bold">css/</span>: Processed CSS gets output here.</li>
          <li class="p-t-1-xs"><span class="bold">templates/</span>: Processed template code gets output here. This is where you snag the production ready code that's already compressed, inlined, and validated.</li>
        </ul>
      </li>
      <li class="p-t-1-xs"><span class="bold">docs/</span>: The docs directory is where the Bounce documentation is stored.
        <ul>
          <li class="p-t-1-xs"><span class="bold">src/</span>: This is where the Sass and JS that supports the Bounce documentation lives.</li>
          <li class="p-t-1-xs"><span class="bold">assets/</span>: This is where all the style-guide documentation assets are stored. Running yarn build will generate CSS and JavaScript in this directory.</li>
          <li class="p-t-1-xs"><span class="bold">templates/</span>: Running yarn build will output templates to docs/templates as well for previewing. In general you shouldn't add new templates here but instead add them under the src directory. If added here, they'll get overwritten in the build process.</li>
        </ul>
      </li>
    </ul>
</ul>

<h3 class="p-t-3-xs">Building Assets + Docs</h3>
<p>Running yarn serve will automatically build assets when they change. To build everthing, use:</p>
<code>$ yarn build</code>

<h3 class="p-t-3-xs">Creating Templates</h3>
<ul>
  <li class="p-t-1-xs"><span class="bold">Add it</span>: Add new templates to src/templates</li>
  <li class="p-t-1-xs"><span class="bold">Build it</span>: Build email templates with: <code>$ yarn build</code></li>
  <li class="p-t-1-xs"><span class="bold">Preview it</span>: After you've added a template, you can preview it with Jekyll.
    <ul>
      <li class="p-t-1-xs">Start the server if you haven't done so already: <code>$ yarn serve</code></li>
      <li class="p-t-1-xs">Say you just added a template in: src/templates/b2b/newsletter-08-2017.html. Now open: http://localhost:4000/email-style-guide/templates/b2b/newsletter-08-2017.html and you should see a preview there.
    </ul>
</ul>

<h3 class="p-t-3-xs">Testing</h3>
<p>While email client testing must be done in a tool such as <a href="https://www.emailonacid.com/" target="_blank">Email on Acid</a>, the build process does include some quality assurance checks. We use <a href="https://github.com/gjtorikian/html-proofer">HTMLProofer</a> to check the documentation site + templates for broken links, missing images, invalid html, etc. We currently run these HTMLProofer checks:</p>
<ul>
  <li class="p-t-1-xs"><a href="https://github.com/gjtorikian/html-proofer#html" class="bold" target="_blank">HtmlCheck</a>: Checks to see whether your HTML markup is valid. </li>
  <li class="p-t-1-xs"><a href="https://github.com/gjtorikian/html-proofer#images" class="bold" target="_blank">ImageCheck</a>: Checks to see whether all your images have alt tags, whether your internal image references are not broken, whether external images are showing, and whether your images are HTTP</li>
  <li class="p-t-1-xs"><a href="https://github.com/gjtorikian/html-proofer#html" class="bold" target="_blank">LinkCheck</a>: Checks to see whether your internal links are working, whether your internal hash references (#linkToMe) are working, whether external links are working, whether your links are HTTPS, and whether CORS/SRI is enabled</li>
  <li class="p-t-1-xs"><a href="https://github.com/gjtorikian/html-proofer#scripts" class="bold" target="_blank">ScriptCheck</a>: Checks to see whether your internal script references are working, whether external scripts are loading, and whether CORS/SRI is enabled</li>
</ul>
<p class="p-t-1-xs">To run it, make sure you have the dependencies by running <code>$ bin/setup</code> then run <code>$ yarn build && yarn test</code>. To test individual templates, run <code>$ bin/test src/templates/example.html</code>.</p>

<h3 id="email-clients" class="m-t-3-xs m-b-3-xs">Tips for ensuring consistent rendering across email clients</h3>
  <ul>
    <li class="m-b-1-xs"><span class="bold">Preventing Date Styling Overrides</span>: Some email clients force dates to be blue, which can at best create an inconsistent link styling and at worse make the text illegable on colored backgrounds. The CSS below is included into the templates and prevents this re-styling from happening on specific email clients.
      <ul>
        <li class="p-t-1-xs">For iOS devices:<code>
      a[x-apple-data-detectors=true] {
       color: inherit !important;
       text-decoration: inherit !important;
      }
      a[x-apple-data-detectors=true] {
       color: inherit !important;
       text-decoration: inherit !important;
      }</code></li>
        <li class="p-t-1-xs">For Outlook.com: <code>
      * [office365] .outlook-link span {
      color: #ffffff !important;
      border-bottom-width:0 !important;
      border-bottom-style:none !important;
    }
    .contextualExtensionHighlight, .ms-font-color-themePrimary, .ms-border-color-themePrimary {
      border-bottom-width:0 !important;
      border-bottom-style:none !important;
    }</code>
        </li>
      </ul>
    </li>
  </ul>
